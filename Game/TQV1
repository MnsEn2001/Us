local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local robloxID = player.UserId
local keyR = key

local function NotifyUser(title, text)
    game.StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Duration = 5
    })
end

local function CopyToClipboard(text)
    setclipboard(text)
end

local function CheckKeyRun(keyR, robloxID)
    local whitelistURL = "https://raw.githubusercontent.com/MnsEn2001/Us/main/database/User_TQ_V1.json"
    local idFound = false

    local response = game:HttpGet(whitelistURL)
    local whitelist = HttpService:JSONDecode(response)

    for _, user in pairs(whitelist.users) do
        if keyR == user.Key then
            if user.IDRB == "" then
                Run_Script()
                idFound = true
                break
            elseif robloxID == tonumber(user.IDRB) then
                Run_Script()
                idFound = true
                break
            end
        end
    end

    if not idFound then
        NotifyUser("Error", "คุณเข้าผิดวิธีกรุณาใช้ Key ในการเข้า ได้คัดลอกลิงค์ดิสคอร์ดไว้ที่คลิปบอร์ดคุณแล้ว")
        CopyToClipboard("https://discord.com/invite/StxhWJE4pb")
    end
end

local function Run_Script()
    NotifyUser("Game", "Treasure Quest : V1")
end

CheckKeyRun(keyR, robloxID)
